{% load static %}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.6">
    <title>Starter Template ¬∑ Bootstrap</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'template.css' %}">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="/docs/4.4/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="/docs/4.4/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="/docs/4.4/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="manifest" href="/docs/4.4/assets/img/favicons/manifest.json">
    <link rel="mask-icon" href="/docs/4.4/assets/img/favicons/safari-pinned-tab.svg" color="#563d7c">
    <link rel="icon" href="/docs/4.4/assets/img/favicons/favicon.ico">
    <meta name="msapplication-config" content="/docs/4.4/assets/img/favicons/browserconfig.xml">
    <meta name="theme-color" content="#563d7c">



    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="{% static 'ajax.js' %}"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js"
        integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk=" crossorigin="anonymous"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css"
        integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" />


</head>

<body>

    <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
        <a class="navbar-brand" href="#">
            <img src="https://www.driving-test-cancellations-4all.co.uk/amp/images/reviews-logo-white.png" alt="logo"
                style="width:100px;height:20px;">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
            aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/d49bcfec26.js" crossorigin="anonymous"></script>

</body>

<section id="cover" class="min-vh-100">
    <div id="cover-caption">
        <div class="container">
            <div class="row text-white">
                <div class="col-xl-5 col-lg-6 col-md-8 col-sm-10 mx-auto text-center form p-4">
                    <!-- <h3 class="display-4 py-2 text-truncate">Center my form.</h3> -->
                    <br>
                    <br>
                    <br>
                    <h3>Review Master</h3>
                    <hr>
                    <div class="px-2">
                        <form name="frm" action="" class="justify-content-center">
                            <div class="form-group">
                                <label class="sr-only">Name</label>
                                <input type="text" id="search" class="form-control" name="product_name_contains"
                                    placeholder="Enter a product name">
                                {% csrf_token %}
                                <ul id="search-results">

                                </ul>

                            </div>
                            <div class="main">

                                <!-- 
                                <div class="form-group">
                                    <label for="inputState">Reviews from</label>
                                    <select id="inputState" class="form-control">
                                        <option selected>All</option>
                                        <option>Most recent</option>
                                    </select>
                                </div> -->
                                <br>
                                <!-- <br> -->


                                <button type="submit" class="btn btn-primary btn-lg">Search</button>
                        </form>

                        <hr />



                    </div>
                </div>
            </div>
        </div>
        <div class="container mx-auto text-center">
            <ul>
                {% for sentiment in queryset %}
                <li>
                    <span style="font-family:courier"> <b>
                            <font color="#78C257">ASIN:</font>
                        </b>
                        <a href="https://www.amazon.com/product-reviews/{{ sentiment.asin }}">
                            {{ sentiment.asin }} </a>
                    </span>
                    <span style="font-family:courier"><b>
                            <font color="#78C257">Product Name:</font>
                        </b> {{ sentiment.Product_Name }} </span>
                    <span style="font-family:courier"><b>
                            <font color="#78C257">Positive:</font>
                        </b> {{ sentiment.Positive }} üëç</span>
                    <span style="font-family:courier"><b>
                            <font color="#78C257">Negative:</font>
                        </b> {{ sentiment.Negative }} üëé</span>
                    <span style="font-family: courier"><b>
                            <font color="#78C257">Overall score:</font>
                        </b> {{ sentiment.score }} {% if sentiment.score == "Positive" %}
                        &#128515;
                        {% else %}
                        &#128532;
                        {% endif %}
                    </span>
                </li>
                <hr />
                {% endfor %}
            </ul>
        </div>

    </div>
</section>

</html>

<script>
    $(document).ready(function () {

        $('#search').keyup(function () {
            var query = $(this).val();
            if (query != '') {
                var _token = $('input[name="_token"]').val();
                $.ajax({
                    method: "POST",
                    url: "/search/",
                    data: {
                        'search_product_text': $('#search').val(),
                        'csrfmiddlewaretoken': $("input[name=csrfmiddlewaretoken]").val()
                    },
                    success: function (data) {
                        $('#search-results').html(data);
                    },
                    error: function (data) {
                        console.log(data);
                    }
                });
            }
        });

        $(document).on('click', 'li', function () {
            $('#search').val($(this).text());

        });
    });
</script>